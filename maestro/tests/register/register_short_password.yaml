# Test ID: REG-VALIDATION-004
# Description: Verify validation for minimum password length
# Preconditions: User is on the registration screen
# Expected Results: Error message is displayed when password is too short
# Tags: [regression, validation]
appId: com.kapil.jain.boltexponativewind
name: "Registration - Password Length Validation"
tags: [regression, validation]
---
# Load Page Object Model and test data
- runScript: 
    file: "../../elements/register.js"
- runScript:
    file: "../../config/testdata.js"

# Launch the app and navigate to registration
- runFlow: "../_common/launch_app.yaml"
- tapOn: "${login.registerLink}"

# Verify registration screen elements
- runFlow: "_common/verify_register_screen.yaml"

# Load test data
- runScript: 
    file: "../../config/testdata.js"

# Fill in valid data except for short password
- tapOn: '${register.fullNameInput}'
- inputText: '${output.testData.users.validUser.name}'

- tapOn: '${register.emailInput}'
- inputText: '${output.testData.users.validUser.email}'

# Enter a password that's too short
- tapOn: '${register.passwordInput}'
- inputSecret: 'short'

# Tap away to trigger validation
- tapOn: '${register.confirmPasswordInput}'

# Verify password length error
- assertVisible:
    id: 'password-error'
    text: '${register.passwordMinLengthError}'

# Verify confirm password also shows error
- assertVisible:
    id: 'confirm-password-error'
    text: '${register.confirmPasswordRequiredError}'

# Verify sign up button is disabled
- assertNotVisible: '${register.signUpButton}'

# Enter a valid password
- tapOn: '${register.passwordInput}'
- clearText
- inputSecret: '${output.testData.users.validUser.password}'

# Enter matching confirm password
- tapOn: '${register.confirmPasswordInput}'
- clearText
- inputSecret: '${output.testData.users.validUser.password}'

# Verify errors are cleared and button is enabled
- assertNotVisible: '${register.passwordMinLengthError}'
- assertNotVisible: '${register.confirmPasswordRequiredError}'
- assertVisible: '${register.signUpButton}'
