# Test login with long inputs
appId: com.kapil.jain.boltexponativewind
---

# Load POM
- runScript: 
    file: ../../elements/login.js

# Launch the app
- runFlow: "_common/launch_app.yaml"

# Verify login screen elements are visible
- runFlow: "_common/verify_login_screen.yaml"

# Generate test data with long email and password
- runScript: _common/generate_long_string.js

# Fill in credentials with the generated long strings
- runFlow: 
    file: "_common/fill_credentials.yaml"
    env:
      LOGIN_EMAIL: "${output.longEmail}"
      LOGIN_PASSWORD: "${output.longPassword}"

# Submit login form
- runFlow: "_common/submit_login.yaml"

# Wait for the validation to complete
- waitForAnimationToEnd

# Verify that the email validation error is shown (long input should be flagged as invalid)
- assertVisible:
    id: "email-input-error"
    text: "Local part of email must be 64 characters or less"

# Verify we're still on the login screen
- assertVisible:
    id: "${output.login.signInButton}"
