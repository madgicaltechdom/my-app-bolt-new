# Test login with incorrect credentials
appId: com.kapil.jain.boltexponativewind
---
# Load POM
- runScript:
    file: ../../elements/login.js

# Launch the app
- runFlow: '_common/launch_app.yaml'

# Verify login screen elements are visible
- runFlow: '_common/verify_login_screen.yaml'

# Fill in incorrect credentials
- runFlow:
    file: '_common/fill_credentials.yaml'
    env:
      LOGIN_EMAIL: 'wrong@example.com'
      LOGIN_PASSWORD: 'wrongpassword'

# Submit login form
- runFlow: '_common/submit_login.yaml'

# Wait for the login attempt to complete
- waitForAnimationToEnd

# Verify the error alert is shown
- assertVisible:
    text: 'Login Failed'
    id: 'alert-title'
- assertVisible:
    text: 'Invalid login credentials'
    id: 'alert-message'

# Dismiss the alert
- tapOn:
    text: 'OK'
    id: 'alert-button'

# Verify we're still on the login screen
- assertVisible:
    id: '${output.login.signInButton}'
